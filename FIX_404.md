# Fix 404 Error - Backend Not Found

## Issue
Getting `The page could not be found` / `NOT_FOUND` when accessing backend URL.

## What I Fixed

1. **Simplified `vercel.json`** - Removed `builds` configuration
   - Vercel automatically detects functions in `api/` directory
   - The `builds` config was causing issues

## Next Steps

### 1. Push the Fix
```bash
cd "/Users/nimishmarathe/oh poc"
git add backend/vercel.json
git commit -m "Fix Vercel config - remove builds, use auto-detection"
git push origin main
```

### 2. Redeploy in Vercel
- Go to your backend project in Vercel Dashboard
- Go to **Deployments** tab
- Click **"⋯"** (three dots) on latest deployment
- Click **"Redeploy"**
- **OR** wait for auto-deploy from the push

### 3. Check Build Logs
After redeploying, check:
- Did the build succeed?
- Are there any errors in the build logs?
- Is the function being created?

### 4. Check Function Logs
1. Go to **Functions** tab in Vercel Dashboard
2. Look for `/api/index` function
3. If it exists, click on it to see logs
4. If it doesn't exist, the function isn't being created

### 5. Verify File Structure
Make sure in your Vercel project:
- **Root Directory**: Set to `backend`
- **Function Location**: `backend/api/index.ts` should exist

## Testing After Fix

After redeploying, test:

```bash
# Health check
curl https://vercel-deployment-backend-three.vercel.app/health

# Root endpoint
curl https://vercel-deployment-backend-three.vercel.app/

# Login
curl -X POST https://vercel-deployment-backend-three.vercel.app/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"superadmin","password":"admin123"}'
```

## If Still Getting 404

### Check These:

1. **Root Directory Setting**
   - In Vercel Dashboard → Your Project → Settings
   - **Root Directory** must be set to `backend`
   - If it's not set, Vercel looks in the root, not in `backend/`

2. **Function File Location**
   - The function should be at: `backend/api/index.ts`
   - Vercel should auto-detect it

3. **Build Command**
   - Check if `npm run vercel-build` is running
   - Check if it's generating Prisma client
   - Check if NestJS is building

4. **Function Logs**
   - Go to Functions tab
   - Check if `/api/index` function exists
   - Check for any runtime errors

5. **Environment Variables**
   - Make sure `DATABASE_URL` is set (even if wrong, it should still create the function)
   - Check if any env vars are causing build to fail

## Common Issues

### Issue: Function not being created
**Fix**: Check Root Directory is set to `backend` in Vercel Dashboard

### Issue: Build fails
**Fix**: Check build logs for specific errors (missing dependencies, Prisma errors, etc.)

### Issue: Function exists but returns 404
**Fix**: Check function logs for runtime errors (missing imports, database connection, etc.)

## Need More Help?

Share:
- Vercel build logs (any errors?)
- Vercel function logs (if function exists)
- Root Directory setting (is it set to `backend`?)

